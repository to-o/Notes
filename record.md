

### 工作日报：

### 2021/6/9

- 

### 2021/6/7

### 周报

#### 总结：

目前bug：49377已经找到解决办法，bug：59661无法复现已经转出，在本周在解决bug：49377中学习到了debian编包过程中的细节rules相关的配置怎么定制自己的rules脚本，以及相关的meson的编译代码相关的知识细节，还有进行解决网络相关的bug，目前在调查日志查看配置过程中的过程。

#### bug:49377

-  使用strace追踪查看到在debuild包的时候出现将meson建立的desktop文件给改写了，dh_langpack处理过程中二次改写目前验证修改rules文件，将dh_translations编译选项去掉，防止二次改写

#### bug：59661

-  光标在文件夹上移动，有卡顿延迟的现象，在桌面空白区域移动，流畅顺滑无异常 目前在复现问题，低概率事件，查看相关的代码
- 发现鼠标在从桌面到一个文件夹窗口这个过度过程中光标出现明显的卡顿现在，目前这个bug在文件夹出现卡顿但是在桌面会100%出现在4K屏幕上面

### 2021/5/31

- GS7865 GS7866
- 去程：11号GS7865          返程：14号GS7866

周报：

- bug 39147 多窗口问题，换掉使用延时来避免空白窗口，使用判断是否都处理完所有的窗口，采用wait解决多窗口之间
  产生的空白窗口，等待所有的线程处理完缩略图才进行之后的步骤

- 解决屏幕花屏的问题，解决方案，bug未复现
- 外接显示器关闭情况下，拔插，会出现奔溃的现象，目前怀疑可能是配置的问题，在关屏拔插的状况下会保存配置导致奔溃





### 周报：

- bug39147  打开50多个窗口的问题，定位到问题的位置，由于每个窗口的缩略图的渲染，由多线程来处理的，每个窗口由一个线程来处理，由于未等所有窗口处理完就进行之后程序代码的运行，导致出现部分窗口出现空白的状况
- 做转正答辩PPT
- 复现 bug：54774 扩展模式下修改LCD分辨率并保存，切换到其他屏模式后，桌面出现闪屏伴随花屏，多次验证未出现问题，转测试进行测试

### 2021/5/22

- bug39147  打开50多个窗口的问题，定位到问题的位置，由于每个窗口的缩略图的渲染，由多线程来处理的，每个窗口由一个线程来处理，由于未等所有窗口处理完就进行之后程序代码的运行，导致出现部分窗口出现空白的状况



### 2021/5/21

- 麒麟影音mini模式会存在毛玻璃背景，追查版本最后定位修改某个bug导致的到因为麒麟影音有设置最小size，所以mini模式的时候其他部分变成了毛玻璃效果，最后将bug转到陈阳平名下，
- bug39147  打开50个以上窗口 打开50个以上窗口部分窗口显示空白 目前正在看ukui-window-switch相关的代码，可能由于相关的窗口太多，需要太长时间渲染
- 代码问题分支 8c6861a9



### 2021/5/20

- 麒麟影音播放视频时，mini模式会存在毛玻璃背景，鼠标点击其他位置毛玻璃背景消失
- 装518版本的系统会出现此问题，但是426版本的不会出现毛玻璃的现象
- ukui-kwin的hw31版本在426版本的不会出现毛玻璃猜测其他模块引入的问题
- 排查其他模块的程序

### 2021/5/19



### 2021/5/18

- 关于ukui-kwin 副屏幕设置分辨率的时间黑屏的时间比较长
  - 其中外接显示器有这个现象 
  - 正在定位问题 目前查的方向点击 > 点击应用> 分辨率改变的函数 > 外接屏幕处理的部分 > 造成延时的地方
  - 不同显示器之间的黑屏时间不一样 考虑显示器不同造成的
  - 代码中查看到通过Wayland进行分辨率设置apply后请求compositor应用配置，之后需要等待应用成功和失败的信号，推断wayland底层渲染导致的
  - 通过打印从设置到设置结束，代码的运行时间未有卡顿



### 2021/5/17

描述：alt + tab 不能获取关于Wayland的窗口ID就无法使用，x11的可以

- 找alt+tab获取窗口id的地方
- 参考任务栏获取x应用的window id的方式，实现wayland应用获取window id的接口
  窗口id查询库：
- bug52598 不需要进行修改



### 2021/4/28

- [原因分析]

  双屏显示时，显示器位置为上下排列的时候，其中X轴坐标为0，y轴有相应数值，左右排列时与之相反，所以考虑与底层ukui-setting-deamon相关，在调正显示器的位置的函数出现问题，猜测可能由于改其他bug引起的问题，所以按照这个思路进行排查。

  [解决方案]

  换原引起问题的代码，进行测试

  [自测结果]
  测试结果：显示器位置为上下排列的时候，重启，关机，注销，待机，休眠回来，显示模式保持扩展模式并且上下排列
  [解决版本]
     包名：ukui-settings-daemon 
     版本：3.0.3-1.42



### 2021/4/21

https://launchpad.dev/kylin-desktop/v101.hw

### 周报4.22-4.29：

- 完成dpkg接口程序dbus调用
- 解决dpkg安装在dbus环境运行时出现的错误
- 解决大字符串的传值问题，以及测试出现的段错误，包括字符结果超过1024后出现的段错误，以及多次调用出现的问题
- 在工控机进行测试，验证功能，了解dbus的工作机制



周报：

- 完成获取屏幕主屏名称接口程序
- 在主机上进行测试 解决出现的问题
- 学习IPC的dbus相关的资料
- 完成dbus调用获取屏幕主屏名称接口程序
- 在工控机上进行测试 验证功能

### 2021/4/13

- 将代码库传到launchpad上进行编包 
- YTTMRDDDJ
- 编完整的包放到设备上进行测试 确保功能的完整性
- 了解 IPC的dbus相关的功能 

### 2021/4/12

- 解决dlopen so库文件时句柄找不到的问题
- ?_.?__!__#



#### 2021/4/9

- 完成获取屏幕接口程序
- 在主机上进行测试 出现到不开句柄的问题



### 2021/4/8

- 学习Debian编包的基本命令 以及dpkg命令 

- 下载开源的源码包 查看目录结构 学习编包的过程 包含一直编译系统等等 

- Debian目录的文件内容代表的含义

- 复习linux基础知识 

- output_is_primary

-  查看Xrandr的代码 找到 获取显示主屏的接口

  ```c
  pub unsafe extern "C" fn XRRGetOutputPrimary(
      dpy: *mut Display, 
      window: Window
  ) -> RROutput
  ```

- 

### 2021/4/7

- 学习打包的技能 了解编包的过程，包括postinst、preinst、postrm 和 prerm 文件等等
- 下载相关的软件包，学习编包的过程
- 安装vscode IDE 适应新的IDE的功能以及相关的快捷键
- 

### 2021/4/6

- debmake是生成debian文件夹的  debuild是生成deb包的
- 完成打包的过程
- http://vscode.cdn.azure.cn/stable/c185983a683d14c396952dd432459097bc7f757f/code_1.55.0-1617120720_amd64.deb
- http://vscode.cdn.azure.cn/stable/c185983a683d14c396952dd432459097bc7f757f/VSCodeUserSetup-x64-1.55.0.exe

### 2021/4/5

- 安装麒麟V10系统到虚拟机


### 2021/4/2

- 学习云学堂的课程
- 搭建launchpad的环境
- 学习debian的编包的过程
  - 使用的命令 dpkg-source -x xxxxxxx.dsc 解压源码包
  - 完成示例的编包历程 

